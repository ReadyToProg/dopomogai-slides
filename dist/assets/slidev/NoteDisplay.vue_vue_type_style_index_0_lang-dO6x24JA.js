import{a6 as T,m,q as v,t as d,f as N,c as x,R as I,u as R,F as B,W as _,ad as z,ab as F,ac as P,O as k,N as D,r as E,a as V,n as q,k as K,w as j}from"../vendor-Db8_RCGK.js";import{o as O,r as U,C as H,_ as W}from"../index-Dt0t0DMn.js";const X={class:"slidev-icon",viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"};function Z(b,u){return m(),v("svg",X,u[0]||(u[0]=[d("path",{fill:"currentColor",d:"M23 28a1 1 0 0 1-.71-.29l-6.13-6.14l-3.33 5a1 1 0 0 1-1 .44a1 1 0 0 1-.81-.7l-6-20A1 1 0 0 1 6.29 5l20 6a1 1 0 0 1 .7.81a1 1 0 0 1-.44 1l-5 3.33l6.14 6.13a1 1 0 0 1 0 1.42l-4 4A1 1 0 0 1 23 28m0-2.41L25.59 23l-7.16-7.15l5.25-3.5L7.49 7.49l4.86 16.19l3.5-5.25Z"},null,-1)]))}const G=T({name:"carbon-cursor1",render:Z}),J=["title"],Q={class:"flex gap-0.2 items-center min-w-16 font-mono mr1"},Y={"text-primary":""},ee={op50:"","text-sm":""},te={key:1,op50:"","flex-auto":"",pl1:""},oe={relative:"","flex-auto":"",h5:"","font-mono":"",flex:"~"},le=["min","max"],se=N({__name:"ClicksSlider",props:{clicksContext:{},readonly:{type:Boolean},active:{type:Boolean,default:!0}},setup(b){const u=b,t=x(()=>u.clicksContext.total),h=x(()=>O(0,u.clicksContext.clicksStart,t.value)),f=x(()=>t.value-h.value+1),n=x({get(){return u.clicksContext.current>t.value?-1:u.clicksContext.current},set(l){u.clicksContext.current=l}}),w=x(()=>U(h.value,t.value+1));function g(){u.readonly||(n.value<0||n.value>t.value)&&(n.value=0)}return(l,a)=>{const p=G;return m(),v("div",{class:k(["flex gap-1 items-center select-none",f.value&&u.clicksContext.isMounted?"":"op50"]),title:`Clicks in this slide: ${f.value}`},[d("div",Q,[I(p,{"text-sm":"",op50:""}),n.value>=0&&n.value!==R(H)&&l.active?(m(),v(B,{key:0},[a[2]||(a[2]=d("div",{"flex-auto":""},null,-1)),d("span",Y,_(n.value),1),a[3]||(a[3]=d("span",{op25:"","text-sm":""},"/",-1)),d("span",ee,_(t.value),1)],64)):(m(),v("div",te,_(t.value),1))]),d("div",oe,[(m(!0),v(B,null,z(w.value,r=>(m(),v("div",{key:r,border:"y main","of-hidden":"",relative:"",class:k([r===0?"rounded-l border-l":"",r===t.value?"rounded-r border-r":""]),style:D({width:f.value>0?`${1/f.value*100}%`:"100%"})},[d("div",{absolute:"","inset-0":"",class:k(r<=n.value&&l.active?"bg-primary op15":"")},null,2),d("div",{class:k([+r==+n.value&&l.active?"text-primary font-bold op100 border-primary":"op30 border-main",r===0?"rounded-l":"",r===t.value?"rounded-r":"border-r-2"]),"w-full":"","h-full":"","text-xs":"",flex:"","items-center":"","justify-center":"","z-1":""},_(r),3)],6))),128)),F(d("input",{"onUpdate:modelValue":a[0]||(a[0]=r=>n.value=r),class:k(["range",l.readonly?"pointer-events-none":""]),type:"range",min:h.value,max:t.value,step:1,absolute:"","inset-0":"","z-10":"",op0:"",style:D({"--thumb-width":`${1/(f.value+1)*100}%`}),onMousedown:g,onFocus:a[1]||(a[1]=r=>{var C;return(C=r.currentTarget)==null?void 0:C.blur()})},null,46,le),[[P,n.value]])])],10,J)}}}),ue=W(se,[["__scopeId","data-v-ef0c5640"]]),ne=["innerHTML"],ae=["textContent"],re=["textContent"],S="slidev-note-fade",y="slidev-note-click-mark",de=N({__name:"NoteDisplay",props:{class:{},noteHtml:{},note:{},highlight:{type:Boolean,default:!0},placeholder:{},clicksContext:{},autoScroll:{type:Boolean}},emits:["markerDblclick","markerClick"],setup(b,{emit:u}){const t=b,h=u,f=x(()=>{var l;return t.clicksContext!=null&&((l=t.noteHtml)==null?void 0:l.includes("slidev-note-click-mark"))}),n=E(null);function w(){var $,A;if(!n.value||!f.value)return;const l=Array.from(n.value.querySelectorAll(`.${y}`)),a=new Map,p=new Map;let r=0;for(const i of l){const s=Number(i.dataset.clicks);a.set(i,s);let o=i,e=i.parentElement;for(;e&&o!==n.value;)p.has(e)||p.set(e,[[null,r]]),p.get(e).push([o,s]),o=e,e=e.parentElement;r=s}const C=new Map;for(const[i,s]of p){let o=!1,e=0;for(const c of Array.from(i.childNodes)){let L=!1;for(;c===(($=s[e+1])==null?void 0:$[0]);)L=!0,e++;if(L)continue;let M=c;if(c.nodeType===3){if(!((A=c.textContent)!=null&&A.trim()))continue;M=document.createElement("span"),M.textContent=c.textContent,i.insertBefore(M,c),c.remove()}o||(o=e===0),C.set(M,s[e][1])}o||(s[0][1]=-1)}return i=>{const s=t.highlight;for(const[o,e]of p)o.classList.toggle(S,s&&!e.some(([c,L])=>L===i));for(const[o,e]of C)o.classList.toggle(S,s&&e!==i);for(const[o,e]of a)o.classList.remove(S),o.classList.toggle(`${y}-past`,s&&e<i),o.classList.toggle(`${y}-active`,s&&e===i),o.classList.toggle(`${y}-next`,s&&e===i+1),o.classList.toggle(`${y}-future`,s&&e>i+1),o.ondblclick=s?c=>{h("markerDblclick",c,e),!c.defaultPrevented&&(t.clicksContext.current=e,c.stopPropagation(),c.stopImmediatePropagation())}:null,o.onclick=s?c=>{h("markerClick",c,e)}:null,s&&t.autoScroll&&e===i&&o.scrollIntoView({block:"center",behavior:"smooth"})}}const g=E();return V(()=>[t.noteHtml,t.highlight],()=>{q(()=>{g.value=w()})},{immediate:!0}),K(()=>{w()}),j(()=>{var a,p;const l=((a=t.clicksContext)==null?void 0:a.current)??H;(p=g.value)==null||p.call(g,l)}),(l,a)=>l.noteHtml?(m(),v("div",{key:0,ref_key:"noteDisplay",ref:n,class:k(["prose overflow-auto outline-none slidev-note",[t.class,f.value?"slidev-note-with-clicks":""]]),innerHTML:l.noteHtml},null,10,ne)):l.note?(m(),v("div",{key:1,class:k(["prose overflow-auto outline-none slidev-note",t.class])},[d("p",{textContent:_(l.note)},null,8,ae)],2)):(m(),v("div",{key:2,class:k(["prose overflow-auto outline-none opacity-50 italic select-none slidev-note",t.class])},[d("p",{textContent:_(t.placeholder||"No notes.")},null,8,re)],2))}});export{ue as C,de as _};
